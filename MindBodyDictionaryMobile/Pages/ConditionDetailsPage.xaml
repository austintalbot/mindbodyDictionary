<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pages="clr-namespace:MindBodyDictionaryMobile.Pages"
             xmlns:vm="clr-namespace:MindBodyDictionaryMobile.PageModels"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:converter="clr-namespace:MindBodyDictionaryMobile.Converter"
             x:DataType="vm:ConditionDetailPageModel"
             xmlns:mi="http://www.aathifmahir.com/dotnet/2022/maui/icons"
             xmlns:admob="clr-namespace:Plugin.AdMob;assembly=Plugin.AdMob"
             x:Class="MindBodyDictionaryMobile.Pages.ConditionDetailsPage"
             Title="{Binding Title}">

    <ContentPage.Resources>
        <ResourceDictionary>
            <toolkit:InvertedBoolConverter x:Key="InvertedBoolConverter" />
            <converter:SelectedTabColorConverter x:Key="SelectedTabColorConverter" />
            <converter:SelectedTabBackgroundColorConverter x:Key="SelectedTabBackgroundColorConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto,*,Auto" Style="{StaticResource MainPageGrid}">
        <!-- Tab Headers -->
        <HorizontalStackLayout Grid.Row="0" HorizontalOptions="FillAndExpand" BackgroundColor="{StaticResource BarColor}">
            <Button Text="Problem"
                    Command="{Binding SelectTabCommand}"
                    CommandParameter="Problem"
                    Style="{StaticResource TabButton}"
                    VisualStateManager.VisualStateGroups="AllStates"
                    TextColor="{Binding SelectedTab, ConverterParameter=Problem, Converter={StaticResource SelectedTabColorConverter}}"
                    BackgroundColor="{Binding SelectedTab, ConverterParameter=Problem, Converter={StaticResource SelectedTabBackgroundColorConverter}}"/>
            <Button Text="Affirmations"
                    Command="{Binding SelectTabCommand}"
                    CommandParameter="Affirmations"
                    Style="{StaticResource TabButton}"
                    VisualStateManager.VisualStateGroups="AllStates"
                    TextColor="{Binding SelectedTab, ConverterParameter=Affirmations, Converter={StaticResource SelectedTabColorConverter}}"
                    BackgroundColor="{Binding SelectedTab, ConverterParameter=Affirmations, Converter={StaticResource SelectedTabBackgroundColorConverter}}"/>
            <Button Text="Recommendations"
                    Command="{Binding SelectTabCommand}"
                    CommandParameter="Recommendations"
                    Style="{StaticResource TabButton}"
                    VisualStateManager.VisualStateGroups="AllStates"
                    TextColor="{Binding SelectedTab, ConverterParameter=Recommendations, Converter={StaticResource SelectedTabColorConverter}}"
                    BackgroundColor="{Binding SelectedTab, ConverterParameter=Recommendations, Converter={StaticResource SelectedTabBackgroundColorConverter}}"/>
        </HorizontalStackLayout>

        <!-- Tab Content -->
        <ContentView Grid.Row="1" Content="{Binding CurrentView}" />
        
        <admob:BannerAd AdUnitId="{Binding BannerAdUnitId}" 
                       x:Name="AdBanner" 
                       Grid.Row="2" 
                       BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                       IsVisible="{Binding ShowAds}" />
    </Grid>
</ContentPage>