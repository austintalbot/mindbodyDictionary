<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MindBodyDictionaryMobile.PageModels"
             xmlns:model="clr-namespace:MindBodyDictionaryMobile.Models"
             x:DataType="vm:MbdConditionDetailPageModel"
             x:Name="this"
             x:Class="MindBodyDictionaryMobile.Pages.MbdConditionDetailsProductsView">
    <Grid RowDefinitions="*">
        <CollectionView x:Name="ProductCollectionView"
                        ItemsSource="{Binding ProductList}"
                        Style="{StaticResource HorizontalCollectionView}"
                        x:DataType="vm:MbdConditionDetailPageModel"
                        EmptyView="There are no corresponding products for this MbdCondition"
                        HeightRequest="{Binding ProductListHeight}"
                        InputTransparent="False">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid HorizontalOptions="Center"
                          x:DataType="model:Recommendation"
                          VerticalOptions="Center"
                          InputTransparent="False">
                        <Border Style="{StaticResource RecommendationBorder}"
                               InputTransparent="False">
                            <Grid RowDefinitions="Auto,Auto,Auto">
                                <Label Grid.Row="0" Text="{Binding Name}" Style="{StaticResource RecommendationNameLabel}" />
                                <BoxView Grid.Row="1" Style="{StaticResource RecommendationBoxView}" />
                                <Button Grid.Row="2"
                                        Text="Add to List"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type vm:RecommendationsPageModel}}, Path=AddToMyListCommand}"
                                        CommandParameter="{Binding .}"
                                        Style="{StaticResource AccentButton}"
                                        Margin="0,10,0,0"/>
                            </Grid>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:MbdConditionDetailPageModel}}, Path=ProductLinkClickCommand}"
                                    CommandParameter="{Binding .}" />
                            </Border.GestureRecognizers>
                        </Border>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentView>
