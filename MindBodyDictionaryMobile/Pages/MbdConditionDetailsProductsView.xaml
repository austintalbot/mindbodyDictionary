<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="MindBodyDictionaryMobile.Pages.MbdConditionDetailsProductsView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:model="clr-namespace:MindBodyDictionaryMobile.Models"
    xmlns:vm="clr-namespace:MindBodyDictionaryMobile.PageModels"
    x:Name="this"
    x:DataType="vm:MbdConditionDetailPageModel">
    <Grid RowDefinitions="*">
        <CollectionView
            x:Name="ProductCollectionView"
            x:DataType="vm:MbdConditionDetailPageModel"
            EmptyView="There are no corresponding products for this MbdCondition"
            HeightRequest="{Binding ProductListHeight}"
            InputTransparent="False"
            ItemsSource="{Binding ProductList}"
            Style="{StaticResource HorizontalCollectionView}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid
                        x:DataType="model:Recommendation"
                        HorizontalOptions="Center"
                        InputTransparent="False"
                        VerticalOptions="Center">
                        <Border
                            Background="White"
                            InputTransparent="False"
                            Style="{StaticResource RecommendationBorder}">
                            <Grid RowDefinitions="Auto,Auto,Auto">
                                <Label
                                    Grid.Row="0"
                                    Style="{StaticResource RecommendationNameLabel}"
                                    Text="{Binding Name}" />
                                <BoxView Grid.Row="1" Style="{StaticResource RecommendationBoxView}" />
                                <Button
                                    Grid.Row="2"
                                    Margin="0,10,0,0"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:RecommendationsPageModel}}, Path=AddToMyListCommand}"
                                    CommandParameter="{Binding .}"
                                    Style="{StaticResource AccentButton}"
                                    Text="Add to List" />
                            </Grid>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:MbdConditionDetailPageModel}}, Path=ProductLinkClickCommand}" CommandParameter="{Binding .}" />
                            </Border.GestureRecognizers>
                        </Border>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentView>
