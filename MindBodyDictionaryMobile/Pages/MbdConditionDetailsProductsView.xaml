<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="MindBodyDictionaryMobile.Pages.MbdConditionDetailsProductsView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:model="clr-namespace:MindBodyDictionaryMobile.Models"
    xmlns:vm="clr-namespace:MindBodyDictionaryMobile.PageModels"
    x:Name="this"
    x:DataType="vm:MbdConditionDetailPageModel">
    <Grid RowDefinitions="*">
        <CollectionView
            x:Name="ProductCollectionView"
            x:DataType="vm:MbdConditionDetailPageModel"
            EmptyView="There are no corresponding products for this MbdCondition"
            HeightRequest="{Binding ProductListHeight}"
            InputTransparent="False"
            ItemsSource="{Binding ProductList}"
            Style="{StaticResource HorizontalCollectionView}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid
                        x:DataType="model:Recommendation"
                        HorizontalOptions="Fill"
                        InputTransparent="False"
                        VerticalOptions="Fill"
                        Padding="5">
                        <Border
                            Background="White"
                            InputTransparent="False"
                            Style="{StaticResource RecommendationBorder}">
                            <VerticalStackLayout Padding="10">
                                <Label
                                    Style="{StaticResource RecommendationNameLabel}"
                                    Text="{Binding Name}"
                                    Margin="0,0,0,5" />
                                <Button
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:RecommendationsPageModel}}, Path=ProductClickedCommand}"
                                    CommandParameter="{Binding .}"
                                    Text="View Product"
                                    Style="{StaticResource AccentButton}"
                                    Margin="0,5,0,5" />
                                <Button
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:RecommendationsPageModel}}, Path=AddToMyListCommand}"
                                    CommandParameter="{Binding .}"
                                    Text="Add to List"
                                    Style="{StaticResource SecondaryButton}" />
                            </VerticalStackLayout>
                        </Border>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentView>
